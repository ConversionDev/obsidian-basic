- 스프링 책 p.335
	- 기존에는 유레카를 에지서버로 썼는데, 어제부터 스프링클라우드 게이트웨이를 에지서버로 씀
	- 넷플릭스에서 더이상 유레카를 사용하거나 지원하지 않기 때문
	- 스프링에서 @bean 보다 application.yaml 이 설정으로는 더 나음
	- p.355 api 보안
		- https는 http의 보안 버전임. security
	- GPT) OAuth 가 뭔지 초보자가 이해하도록 설명해줘
		- 비밀번호를 주지 않고도, 다른 서비스가 내 계정 정보에 접근하도록 허락하는 방법
		- 토큰을 준다는 것. 
		- 그 홈페이지에서 아이디 비번으로 로그인 하는 게 아니라 구글로 로그인하는 것 처럼
		- 큐알로 승인하면 토큰 줌. 토큰=출입증
		- 리액트에서 보낸건 다 다이렉트. 거기서 다시 안내 해주는 게 리다이렉트
		- Auth = 인증(Authentication) + 인가(Authorization)
			- authen : 인증 (코딩에서 이게 먼저)
			- author : 인가 (는 그 다음) = 권한부여 = ==access token==
				- 구글 네이버 카카오같은 애들이 e를 처리??
				- ==refresh tocken== 재발급 토큰 : Access Token 재발급용. 은행 로그인 10분 연장 같은거
			- 따라서 권한 = grant = author
			- 오센으로 백에서 인증 받고 프론트 갈 때 오서를 담고 있음

		- GPT) OAuth 에서 PKCE 가 뭐야?
			- 모바일 앱·SPA(브라우저)처럼 클라이언트 시크릿을 숨길 수 없는 환경에서, 인증 코드를 훔쳐가도 못 쓰게 막는 보안기술 (예시: ??)

		- GPT) OAuth 에서 JWT 가 뭐야?
			- **JWT(Json Web Token, 제이더블유티)** 는  **“로그인한 사용자를 증명하는 디지털 신분증(토큰)”이라고 생각하면 돼. JWT = 로그인하면 받는 “전자 신분증”
			- OAuth 로그인 후 서버는 사용자에게 ==**Access Token**(접근 토큰)을 줘. 이 토큰의 형태가 **JWT**일 때가 많아.==
			- 즉, 서버가 사용자를 믿을 수 있는 암호화된 정보로 만들어서 클라이언트에게 준 것. 이걸 들고 있으면 권한 있는 API를 호출할 수 있음.
			-----
			- 인증 전략 제안:
				1. 프론트에서 카카오 로그인 버튼 클릭 → 카카오 OAuth 페이지로 리다이렉트
				2. 사용자 승인 → 카카오에서 인증 코드 발급
				3. 백엔드에서 인증 코드로 Access Token 요청
				4. Access Token/JWT를 프론트에 전달 → API 호출 가능
			----------
			- ==예시: **구글 로그인 버튼 클릭**==
				1. ==사용자가 **내 사이트**에서 “구글로 로그인” 버튼 클릭==
				2. ==브라우저가 **구글 로그인 페이지**로 이동 → 여기서 로그인/승인 진행==
				3. ==로그인 후 구글이 **내 사이트로 다시 보내줄 URL**(리디렉션 URI)로 자동 이동==
				4. ==URL에 **인증 코드**를 붙여서 보내줌==
				5. ==내 사이트 서버가 인증 코드 받아 **Access Token** 발급==
    

-  핵심: 사용자가 로그인하는 과정이 **내 사이트 밖에서 진행되지만**, 최종적으로 다시 내 사이트로 돌아오게 하는 게 리다이렉트



- CLODE) 사진에 있는 내용 긁어주면서 --> 지금은 더미 값으로 무조건 성공시켰지만, 이제는 카카오에서 인증을 하고싶어. 현재 env 파일에는 KAKAO_REST_API_KEY, KAKAO_ADMIN_KEY, KAKAO_REDIRECT_URI 가 등록되어있어. 인증에 필요한 값이 더 있는지와 카카오 인증을 하기위한 전략을 제안해줘
	- ![[Pasted image 20251126123413.png]]


- 아래 의존성 어스서비스에 있는 빌드그래들에 추가하고, 컨테이너 다시 만들어야해
	implementation 'io.jsonwebtoken:jjwt-api:0.12.3'
	runtimeOnly 'io.jsonwebtoken:jjwt-impl:0.12.3'
	runtimeOnly 'io.jsonwebtoken:jjwt-jackson:0.12.3'

-  키 받아서 프론트한테 줘야 해. SSH 했던 것 처럼

- PowerShell에서 입력:

`node -e "console.log(require('crypto').randomBytes(64).toString('base64'));"`

➡️ 바로 64바이트 JWT_SECRET 생성됨.




![[Pasted image 20251126150903.png]]



-------
### 구글 하기
- GPT )구글에서 OAuth 를 위한 클라이언트 id 하고 클라이언트 secret 를 발급 받아야해. 초보자가 이해할 수 있도록 과정을 설명해줘
	- https://console.cloud.google.com/ 접속 > 처음에는 왼쪽 상단에 프로젝트 > 프로젝트 만들고(eliana) > 프로젝트 들어가면 왼쪽 상단에 줄 세개짜리 토글 열기(탐색메뉴) > API 및 서비스 > 사용자 인증 정보 > 웹클라이언트 > 만든거 선택하고 들어가면 정보 보임

- 어스 클라이언트 만들기
	- 다음 사진처럼 http~ 주소들 넣기
	- 리디렉션 주소는 .env 파일에 있는 걸로 통일시키기
		http://localhost:3000
		http://localhost:8080/oauth2/google/callback
			![[Pasted image 20251126111646.png]]

- 프론트엔드 .env.local 파일 --> 프론트에는 절대 env 파일을 주지 않을거야. 무조건 백에서 다 처리하도로 해
-----


# 파이썬 추가하기, 게이트웨이에 AI 추가하기
- 채팅은 어싱크니까 따로 빼
- 자바는 싱크 / 게이트웨이랑 리액트는 플럭스라 어싱크임
- GPT) 보일러 플레이트가 뭐야? 개발 초보자가 알기쉽게 이해해도록 개념을 설명해줘
	- 보일러플레이트(Boilerplate)는 개발할 때 매번 반복적으로 써야 하는 기본 틀, 즉 ‘미리 만들어진 기본 코드/구조’라고 이해하면 돼.
- GPT) fastapi 에 open ai api를 빌트인 한 보일러 플레이트를 작성하는 cli를 제공해줘.

- 자바할 때 jdk 다운받아서 환경변수 넣어서 헬로우월드 띄움
- 리액트는 노드 다운받아서 했지.
- 이제는 아나콘다 다운받기
	- sign in / up 차례대로 누르면 스크롤 하면 아나콘다 64비트 인스톨 뜸. (미니콘다 아님)
			![[Pasted image 20251126165234.png]]
	- 다운로드 후 실행하면서 넥스트 누르니 아래 사진처럼 뜸
		- 개인 노트북인지 회사껀지에 따라서 달라짐 / 파이토치 텐서플로 등 인공지능 개발을 할건데 어느 것을 추천해?
			![[Pasted image 20251126165552.png]]