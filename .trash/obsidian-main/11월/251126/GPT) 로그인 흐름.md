## OAuth 로그인 전체 흐름 (카카오/구글 기준)

### 1️⃣ 사용자 로그인 시도
- 사용자가 내 사이트에서 **“카카오 로그인”** 버튼 클릭
- 브라우저가 카카오 로그인 페이지로 **리다이렉트**
- 사용자는 카카오 계정으로 로그인 & 권한 승인

### 2️⃣ 인증 코드 발급
- 로그인/승인 완료 후, 카카오가 **내 사이트 리디렉션 URI**로 인증 코드(Code) 전송
- 예: `http://localhost:3000/oauth/callback?code=ABCDEFG`

### 3️⃣ 서버가 인증 코드로 Access Token 요청
- 내 사이트 **백엔드 서버**가 카카오 서버에 요청:
    - 요청 내용: `인증 코드`, `리디렉션 URI`, `클라이언트 키`
- 카카오 서버가 확인 후 **Access Token + Refresh Token** 발급

### 4️⃣ 서버가 클라이언트(프론트)로 토큰 전달
- 백엔드는 받은 Access Token(JWT 형태 가능)을 프론트로 전달
- 프론트는 이 토큰을 저장 → 이후 API 요청 시 사용

### 5️⃣ Access Token으로 권한 있는 API 호출
- 프론트가 API 요청 시, HTTP 헤더에 `Authorization: Bearer <AccessToken>` 포함
- 서버가 토큰 검증 → 권한 확인 후 요청 처리
- 예: 사용자 프로필 조회, 게시글 작성 가능

### 6️⃣ 토큰 만료 & Refresh Token
- Access Token은 유효 기간이 짧음 (예: 10분)
- 만약 만료되면, **Refresh Token**으로 새 Access Token 발급
- 사용자는 다시 로그인하지 않아도 됨

### 7️⃣ PKCE가 필요한 경우
- SPA/모바일 앱에서는 **클라이언트 시크릿을 숨길 수 없음**
- 인증 코드 발급 시 **코드 챌린지** 포함 → 토큰 요청 시 검증
- 중간에 인증 코드가 도난당해도 토큰 발급 불가